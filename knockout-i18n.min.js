;(function(){if(!window.ko)throw new Error('Translation requires knockout.');var bundles=ko.observable({});ko.i18n={locale:ko.observable('en'),setBundle:function(locale,bundle){var value=bundles();value[locale]=bundle;bundles(value);},setBundles:function(bundles){var value=bundles();Object.keys(bundles).forEach(function(locale){value[locale]=bundles[locale];});bundles(value);}};ko.bindingHandlers.i18n={update:function(elm,valueAccessor,bindings){var value=ko.unwrap(valueAccessor());if(typeof value=="string"){value={$:value};}
Object.keys(value).forEach(function(attr){var _value=getBundleValue(value[attr]);if(bindings.has('i18n-options')){var substitudes=bindings.get('i18n-options')||{};for(var key in substitudes){if(substitudes.hasOwnProperty(key)){_value=_value.replace('{{'+key+'}}',substitudes[key]);}}}
if(attr=='$'){elm.innerHTML=_value;}
else{elm.setAttribute(attr,_value);}});}};function getBundleValue(key){var locales=ko.i18n.locale(),value=bundles();if(!Array.isArray(locales)){locales=[locales];}
return locales.reduce(function(result,locale){return result||(value[locale]||{})[key];},undefined)||key;}})();
